# 第一章 MVC开发模式

JSP 简化了 Servlet 的开发，但是如果过度使用 JSP ，在 JSP 中书写大量的 Java 代码，又写 HTML 标签，造成难于维护，难于分工协作。Java 的 Web 开发，借鉴 MVC 开发模式，使得程序的设计更加合理性。

MVC模式是软件工程中常见的一种软件架构模式，该模式把软件系统（项目）分为三个基本部分：**模型（Model）、视图（View）和控制器（Controller）。**

使用MVC模式有很多优势，例如：简化后期对项目的修改、扩展等维护操作；使项目的某一部分变得可以重复利用；使项目的结构更加直观。耦合性低，方便维护，可以利于分工协作，重用性高。MVC开发模式缺点是使得项目架构变得复杂，对开发人员要求高。

* M（Model）：模型持有所有的数据、状态和程序逻辑。模型接受视图数据的请求，并返回最终的处理结果。实际开发中，通常用封装数据的 JavaBean 和封装业务的 JavaBean 来实现模型层。
* V（View）：视图。负责界面的显示，以及与用户的交互功能，例如表单、网页等。JSP / HTML / CSS
* C（Controller）：控制器。获取用户的输入、调用模型、将数据交给视图进行展示。可以理解为一个分发器，用来决定对于视图发来的请求，需要用哪一个模型来处理，以及处理完后需要跳回到哪一个视图。即用来连接视图和模型。Servlet 实现

<img src="..\图片\3-16【软件设计架构】\1-1.png" />

# 第二章 软件设计三层架构

<!-- POJO(Plain Old Java Objects)普通的Java对象 -->

三层是指表示层（USL，User Show Layer）、业务逻辑层（BLL，Business Logic Layer）、数据访问层（DAL，Data Access Layer）。

三层中使用的数据，是通过实体类（封装数据的JavaBean）来传递的。实体类一般放在pojo/domain/entity/bean包下。

<img src="..\图片\3-16【软件设计架构】\2-1.png" />

## 2.1 数据访问层DAL

数据访问层（DAL，Data Access Layer）

数据访问层也称为持久层，位于三层中的最下层，用于对数据进行处理。该层中的方法一般都是“原子性”的，即每个方法都不可再分。比如，可以在DAL层中实现数据的增删改查操作，而增、删、改、查四个操作是非常基本的功能，都是不能再拆分的。

DAL一般写在dao包中，包里面的类名也是以“Dao”结尾，如StudentDao.java等。DAL是由dao包中的多个`类名Dao.java`组成。

## 2.2 业务逻辑层BLL

业务逻辑层（BLL，Business Logic Layer）

位于三层中的中间层（DAL与USL中间），起到了数据交换中承上启下的作用，用于对业务逻辑的封装。BLL的设计对于一个支持可扩展的架构尤为关键，因为它扮演了两个不同的角色。对于DAL而言，它是调用者；对于USL而言，它是被调用者。依赖与被依赖的关系都纠结在BLL上。

使用上，就是对DAL中的方法进行“组装”。比如：可以实现对Student对象的增删改查，但是BLL中的增、删、改、查不再是 “原子性”的功能，而是包含了一定的业务逻辑（进行操作之前判断一下或者组装）。

该层中的“删”不再像DAL中那样仅仅实现“删”，而是在“删”之前要进行业务逻辑的判断：先查找该学生是否存在（即先执行DAL层的“查”），如果存在才会真正地“删”（再执行DAL层的“删”），如果该学生不存在则应该提示错误信息。即BLL中的“删”，应该是“带逻辑的删”（即先“查”后“删”），也就是对DAL中的“查”和“删”两个方法进行了“组装”。

## 2.3 表示层USL

表示层（USL，User Show Layer）、界面层、web层、控制层。

位于三层中的最上层，用于显示数据和接收用户输入的数据，为用户提供一种交互式操作的界面。USL又分为“USL前台代码”和“USL后台代码”，其中“USL前台代码”是指用户能直接访问到的界面，一般是程序的外观（如html文件、JSP文件等），类似于MVC模式中的“视图”；“USL后台代码”是指用来调用业务逻辑层的 JAVA 代码（如Servlet），类似于 MVC 模式中的“控制器”。

表示层前台代码放在 Web 目录下，而表示层后台代码目前放在 servlet 包下。命名为 controller 层或者 web 层。

## 2.4 MVC和三层架构

MVC模式和三层架构，是分别从两个不同的角度去设计的，但目的都是“解耦，分层，代码复用等”。

<img src="..\图片\3-16【软件设计架构】\2-2.png" />

# 第三章 常见项目分层

<!-- plain:清除的、朴素的、坦率地；ordinary:平常的、平凡的、平庸的 -->

pojo（Plain Ordinary Java Object）：普通的 Java 对象，简单的 JavaBean 实体类。它是 po、VO、dto 的统称。

- PO（Persistent Object）：PO 用于业务层与持久层之间传输数据。
- DO（Domain Object）：从现实世界中抽离出来的有形或无形的业务实体。
- DTO（Data Transfer Object）：dto 用于接口层向业务逻辑层之间传输数据。
- VO（View Object）：VO 用于前端与接口层之间传输数据。

![](..\图片\3-16【软件设计架构】\3-1.png)

## 3.2 PO

PO（Persistent Object）：持久化对象，它跟持久层（通常是关系型数据库）的数据结构形成一一对应的映射关系。如果持久层是关系型数据库，那么，数据表中的每个字段就对应 PO 的一个属性。

分辨 PO 实体类的有效方法是看其类上有没有加上注解 `@TableName` 或者主键 id 有没有加 `@TableId`。有这个基本都是对应数据库的类，也就是 PO。

不同项目的 PO 可能命名不同，他们可能放在 entity、domain、PO 等包下。

## 3.4 DTO

DTO（Data Transfer Object）：数据传输对象。用于展示层和业务逻辑层之间的数据传输。

PO 接收数据库的数据，然后转成 DTO，DTO 再转成 VO。有时候为了偷懒，直接把 DTO 当成 VO 就不再转一层直接返回给前端。

## 3.3 VO

VO（View Object）：视图对象，用于展示层，它的作用是把某个指定页面（或组件）的所有数据封装起来。

## 3.4 VO 和 DTO区别

对于绝大部分的应用场景来说，DTO 和 VO 的属性值基本是一致的，而且他们通常都是 POJO，因此没必要多此一举。但是这是实现层面的思维，对于设计层面来说，概念上还是应该存在 VO 和 DTO，因为两者有着本质的区别，DTO 代表服务层需要接收的数据和返回的数据，而 VO 代表展示层需要显示的数据。
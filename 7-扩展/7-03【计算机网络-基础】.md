# 第一章 基础概念

[中国互联网网络信息中心](https://www.cnnic.net.cn/) CNNIC（China Internet Network Information Center）：经国家主管部门批准，于1997年6月3日组建的管理和服务机构，行使国家互联网络信息中心的职责。

## 1.1 因特网概述

网络（Network）由若干节点（Node）和连接这些节点的链路（Link）组成。多个网络可以通过路由器互连起来，这样就构成了一个覆盖范围更大的网络，即互连网/互联网。因此，互连网是*网络的网络*（Network of Networks）

因特网（Internet）是世界上最大的互连网络，用户数以亿计，互联的网络数以百万计。

* internet（互连网或互联网）是一个通用名词，它泛指由多个计算机网络互连而成的网络。在这些网络之间的通信协议可以是任意的。
* Internet（因特网）是一个专用名词，它指当前全球最大的、开放的、由众多网络相互连接而成的特定计算机网络，它采用TCP/IP协议族作为通信的规则，其前身是美国的ARPANET。

![](..\图片\7-03【计算机网络】\1-1.png)

**因特网发展的三个阶段**

因特网的发展大致分为三个阶段：1969年从单个网络ARPANET向互联网发展、1985年逐步建成三级结构的因特网、1993年逐步形成了多层次ISP结构的因特网。下面每三个时间代表一个阶段：

* 1969年，第一个分组交换网ARPANET诞生；
* 70年代中期，开始研究多种网络之间的互联；
* 1983年，TCP/IP成为ARPANET的标准协议，因此也被成为因特网诞生时间；
* 1985年，美国国家科学基金会 [NSF](https://www.nsf.gov/)（National Science Foundation，United States）围绕六个大型计算中心建设国家科学基金网 NSFNET。NSFNET是一个三级的网络结构，分为主干网、地区网、校园网/企业网；
* 1990年，ARPANET 任务完成，正式关闭；
* 1991年，美国政府将因特网主干网交给私人公司经营，并开始对接入因特网的单位收费；
* 1993年，NSFNET 逐渐被若干个商用因特网主干网替代，美国政府机构不再负责因特网运行，让各种因特网服务提供者 ISP（Internet Service Provider）来运营；
* 1994年，欧洲原子核研究组织开发的万维网WWW技术促使因特网迅猛发展；
* 1995年，NSFNET 停止运作，因特网彻底商业化。

因特网服务提供者ISP（Internet Service Provider）：提供给用户 IP 地址的角色，每个用户通过 ISP 提供的 IP 地址使用互联网，没有IP地址不可以使用互联网。例如电信、移动、联通等。

**因特网的组成**

因特网可以大致分为两个部分：边缘部分、核心部分。

- 边缘部分：由所有连接在因特网的主机组成，是用户直接使用的，用来通信和资源共享的设备。
- 核心部分：由大量网络和连接这些网络的路由器组成，这部分是为边缘服务提供服务的，提供连通性和交换。

![](..\图片\7-03【计算机网络】\1-2.png)

## 1.2 数据交换方式

网络中传输数据一共由三种方式：电路交换（Circuit Switching）、报文交换、分组交换（Paket Switching）。目前互联网使用的交换方式是分组交换。

![](..\图片\7-03【计算机网络】\1-3.png)

**电路交换（Circuit Switching）**

电话交换机接通电话线的方式称为电路交换。从通信资源的分配角度来看，交换（Switching）就是按照某种方式动态的分配传输线路的资源。

在电路交换过程中要先进行建立连接，连接建立完成后直接进行报文传输，传输完成后释放连接。传输时以比特流直通形式传输。

**报文交换（Message Switching）**

每一个结点接收整个报文，检查目标结点地址，然后根据网络中的通信情况在适当的时候转发到下一个结点。经过多次的存储——转发，最后到达目标，因而这样的网络叫存储——转发网络。其中的交换结点要有足够大的存储空间（一般是磁盘），用以缓冲收到的长报文。

在报文交换中，把整个报文先传送到相邻节点交换机，节点交换机进行储存下来后进行查表转发，转发到下一个节点交换机。

**分组交换（Paket Switching）**

| 分组交换中角色 |        作用        |
| :------------: | :----------------: |
|     发送方     | 构造分组、发送分组 |
| 路由器/交换机  | 缓存分组、转发分组 |
|     接收方     | 接收分组、还原报文 |

- 发送方：把整块数据/信息分为多个数据段（相对于报文传输而言），数据段分开传输。在数据段前面加上首部后，成为一个分组。以分组为单位传输。
- 路由器：各个分组交换机会把分组先存储下来，然后根据其头部信息中的目的地址，发送给下一个交换机。各个交换机进行对分组信息的储存转发后，最终到达目的主机。
- 接收方：目的地处理及再去除分组首部，还原出报文。传输完成。

分组交换可以随时发送分组，不需要事先建立连接。

![](..\图片\7-03【计算机网络】\1-4.png)

## 1.3 计算机网络分类

计算机网络主要是一些通用的、可编程的硬件互连而成的，而硬件并非专门用来实现某一特定目的的，这些可编程的硬件能够用来传送多种不同类型的数据（如音频、数据），这些可编程的软件能支持广泛和日益增长的应用。

### 1.3.1 常见分类方式

- 按照交换技术可将计算机网络分为：电路交换网络、报文交换网络、分组交换网络。
- 按照使用者可将计算机网络分为：公用网、专用网。
  - 公用网指的是电信公司构建的大型网络，面对公众开放，只要交钱既可使用，又叫公众网。
  - 专用网指的是某个部门为本单位的特殊业务工作需要而建造的网络。例如铁路部门、电信部门专门为自己构建的，不对外开放的网络。
- 按照传输介质可将计算机网络分为：有线网络、无线网络。
  - 有线网络主要双绞线(日常使用网线)、光纤。
  - 无线网络主要是WIFI。
- 按照拓扑结构分类：总线型网络、星形网络、环形网络、网状型网络。

### 1.3.2 覆盖范围分类

按照覆盖范围可将计算机网络分为：广域网WAN（Wide Area Network）、城域网MAN（Metropolitan Area Network）、局域网LAN（Local Area Network）、个域网PAN（Personal Area Network）。

**广域网**

广域网 WAN（Wide Area Network），又称广域网、外网、公网。是连接不同地区局域网或城域网计算机通信的远程网。通常跨接很大的物理范围，所覆盖的范围从几十公里到几千公里，它能连接多个地区、城市和国家，或横跨几个洲并能提供远距离通信，形成国际性的远程网络。

**城域网**

城域网 MAN（Metropolitan Area Network）是在一个城市范围内所建立的计算机通信网，作用距离约为5~50km，属宽带局域网。采用具有有源交换元件的局域网技术，网中传输时延较小，它的传输媒介主要采用光缆，传输速率在100Mbit/s以上。

**局域网**

局域网 LAN（Local Area Network）一般用微型计算机或工作站通过高速通信线路相连（速率通常在10Mbit/s以上），但地理上则局限在较小的范围，如1km左右。

* 以太网：以太网是一种计算机局域网技术。IEEE组织的IEEE 802.3标准制定了以太网的技术标准，它规定了包括物理层的连线、电子信号和介质访问层协议的内容。以太网是目前应用最普遍的局域网技术，取代了其他局域网技术如令牌环、FDDI 和 ARCNET。
* WLAN 和 WIFI：无线局域网，简称 WLAN（Wireless Local Area Network）。是在几千米范围内的公司楼群或是商场内的计算机互相连接所组建的计算机网络，一个无线局域网能支持几台到几千台计算机的使用。无线局域网的一个标准称为 IEEE 802.11，俗称 WIFI。

**个域网**

个人区域网 PAN（Personal Area Network），在个人工作的地方把属于个人使用的电子设备用无线技术连接起来的网络，也常称为无线个人区域网 WPAN(Wireless PAN)，其作用范围很小，大约在10m左右。

## 1.4 计算机网络性能指标

<!-- bps：bit per second； -->

性能指标可以从不同的方面来度量计算机网络的性能。常用的性能指标有8个：速率、带宽、吞吐量、时延、时延带宽积、往返时间、利用率、丢包率。

**速率**

速率就是计算机网络上的主机在数字信道上传送比特的速率，也称为比特率或数据率，单位是`bit/s`/`b/s`/`bps`。

```apl
kb/s = 10^3b/s
Mb/s = K Kb/s = 10^6 b/s
Gb/s = k Mb/s = 10^9 b/s
Tb/s = k Gb/s = 10^12 b/s
```

比特/比特位/位是计算机中数据量的单位，也是信息论中信息量的单位，一个比特就是二进制数字中的一个1或0。一个字节就是8个比特位。

```apl
# 1个字节Byte = 8个比特位bit
8 bit = 1 Byte
KB = 2^10B
MB = K KB = 2^20 B
GB = K MB = 2^30 B
TB = K GB = 2^40 B
```

**带宽**

带宽是一个很重要的计算机网络性能指标。直接关系网络的应用体验。它在不同的系统中有着不同的含义：

* 模拟信号系统中意义：表示的是信号所包含的各种不同频率成分所占据的频率范围，也就是传输过程中最大频率与最小频率的范围。单位是Hz（kHz、MHz、GHz）。
* 计算机网络中的意义：表示网络的通信线路所能传送数据的能力，因此网络带宽表示在单位时间内从网络中的某一点到另一个点所能通过的“最高数据率。单位与速率相同 b/s（kb/s, Mb/s, Gb/s, Tb/s）

带宽的这两种表述之间有着密切的联系。一条通信线路的频带宽度越宽，那么其所传输数据的最高数据率也越高。

**吞吐量**

吞吐量表示在单位时间内通过某个网络（或信道、接口）的数据量。吞吐量被经常用于对现实世界中的网络的一种测量，以便知道实际上到底有多少数据量能够通过网络。吞吐量受网络的带宽或额定速率的限制。

**时延**

![](..\图片\7-03【计算机网络】\1-5.png)

时延一般由三部分组成：发送时延 + 传播时延 + 处理时延（有时也把排队时延算进去）。

* 发送时延：源主机将分组发送出去产生的时延。发送时延 =  分组长度(b) ➗ 发送速率(b/s)。发送效率是一个短板效应，由速率最低的模块决定，所以在选择网线、路由器等设备时，要考虑到整体的速率平衡问题。发送速率 = min[网卡发送速率，信道带宽，交换机或路由器的接口速率]。
* 传播时延：分组在线路中传播产生的时延。传播时延 = 信道长度(m) ➗ 电磁波传播速率(m/s)。
* 处理时延：路由器收到分组后对其进行存储转发产生的时延。因为这个收到影响的因素太多，不方便计算，因此一般忽略。

**时延带宽积**

时延带宽积就是一个比特到达终点的单位时间内传输的比特个数。若发送端连续发送数据，则在所发送的第一个比特即将到达终点时，发送端就已经发送了时延带宽积个比特。链路的时延带宽积又称为以比特为单位的链路长度。

时延带宽积 = 传播时延 ✖ 带宽。

**往返时间**

往返时间RTT（Round Trip Time）是一个网络请求双向交互一次所需的时间。

**利用率**

利用率由两个概念，分别是信道利用率和网络利用率：

* 信道利用率：用来表示某信道有百分之几的时间是被利用的（有数据通过）。
* 网络利用率：是全网络的信道利用率的加权平均。

根据排队论，当某信道的利用率增大时，该信道引起的时延也会迅速增加。因此，信道利用率并非越高越好。也不能使信道利用率太低，这会使宝贵的通信资源被白白浪费，应该使用一些机制，可以根据情况动态调整输入到网络中的通信量，使网络利用率保持在一个合理的范围内。

**丢包率**

丢包率即分组丢失率，是指在一定的时间范围内，传输过程中丢失的分组数量与总分组数量的比率。丢包率具体可分为接口丢包率、结点丢包率、链路丢包率、路径丢包率、网络丢包率等。

分组丢失率/丢包率主要有两种情况：

* 分组在传输过程中出现误码，被结点丢弃。
* 分组到达一台队列已满的分组交换机时被丢弃，在通信量较大时就可能造成网络拥塞。

因此丢包率反映了网络的拥塞情况：无拥塞时丢包率为0、轻度拥塞时丢包率为1％—4％、严重拥塞时丢包率为5％-15％。

## 1.5 计算机网络体系结构

计算机网络体系可以大致分为一下三种：开放式系统互联OSI（Open System Interconnect）七层模型、TCP/IP四层模型和五层模型。

- OSI 七层模型：大而全，但是比较复杂、而且是先有了理论模型，没有实际应用。它是法律上的国际标准。
- TCP/IP四层模型：是由实际应用发展总结出来的，从实质上讲，TCP/IP只有最上面三层，最下面一层没有什么具体内容，目的是为了允许任何形式的网络接口使用TCP/IP协议。它是实际上的国际标准。
- 五层模型：五层模型只出现在计算机网络教学过程中，这是对七层模型和四层模型的一个折中，既简洁又能将概念阐述清楚。

![](..\图片\7-03【计算机网络-网络模型】\1-1.png)

### 1.5.1 OSI 网络七层模型

OSI网络七层模型是ISO组织定义的国际通用标准模型，其目的是为了制定全球统一的网络模型标准，让全球内的国家、组织可以实现网络互通。OSI网络七层模型分别为：**应用--表示--会话--传输--网络--数据链路--物理**

* **应用层**：给用户和抽象的网络之间提供一个接口，为应用程序提供交互服务。常见协议有：TELENT、HTTP、HTTPS、FTP、DNS、POP3、SMTP等。
* **表示层**：表示层提供各种数据的编码和转换功能，确保一个系统的应用层发送的数据能被另一个系统的应用层识别。例如：数据格式变化、数据加密与解密、数据压缩与解压等。常见协议有：Rlogin、SNMP、Gopher。
* **会话层**：会话层就是负责建立、管理和终止两个节点（应用程序）之间的通信会话。负责维护两个节点之间的传输联接，确保点到点传输不中断，以及管理数据交换等功能。
* **传输层**：传输层实现了网络中不同主机上的用户进程之间的数据通信，为用户提供了端到端的服务。定义了传输数据的协议端口号，以及流量控制和差错校验。常见协议有：TCP、UDP。
* **网络层**：为主机提供数据传输服务。而传输层协议是为主机中的进程提供数据传输服务。网络层把传输层传递下来的报文段或者用户数据报封装成分组。IP协议是Internet的基础。常见协议有：IP、ICMP、ARP、RARP、AKP、UUCP。
* **数据链路层**：网络层针对的还是主机之间的数据传输服务，而主机之间可以有很多链路，链路层协议就是为同一链路的主机提供数据传输服务。数据链路层把网络层传下来的分组封装成帧。
* **物理层**：物理层的作用就是提供了网络的双向通讯，为双向传输提供了有保障的通路。考虑的是怎样在传输媒体上传输数据比特流，而不是指具体的传输媒体。物理层的作用是尽可能屏蔽传输媒体和通信手段的差异，使数据链路层感觉不到这些差异。

就像一个公司要分很多部门一样，每个部门各司其职，网络模型分层的目的也是为了这样，另外分层还能达到降低复杂性、统一标准、工程模块化、快速发展、易于学习掌握等目的。

公司的部门和部门之间肯定是有一定联系的。所以在OSI七层模型中，相邻层之间也都是有联系的，这个联系就叫做服务接入点，简称SA(service access)。所以正是因为相邻两层之间有SA，这两层之间才会有联系。相邻两层之间必须有服务接入点。

### 1.5.2 TCP/IP 四层模型

**TCP/IP**（`Transmission Control Protocol/Internet Protocol`，传输控制协议/网际协议）指能够在多个不同网络间实现信息传输的协议簇。该协议具有很强的灵活性，支持任意规模的网络，几乎可连接所有服务器和工作站。定义了主机如何连入因特网及数据如何在它们之间传输的标准。

TCP/IP 协议不仅仅指的是TCP 和IP两个协议，而是指一个由 TCP、IP、UDP、FTP、SMTP 等协议构成的协议簇， 只是因为在TCP/IP协议中TCP协议和IP协议最具代表性，所以被称为 TCP/IP 协议。

TCP/IP 协议在一定程度上参考了OSI的体系结构。不同于ISO模型的七个分层，TCP/IP 协议参考模型把所有的TCP/IP系列协议归类到四个抽象层中：**应用--传输--网络--网络接口层**。数据链路层和物理层合并为网络接口层。网络层也称为IP层。

TCP/IP 体系结构不严格遵循 OSI 分层概念，应用层可能会直接使用 IP 层或者网络接口层。

![](..\图片\7-03【计算机网络-网络模型】\1-2.png)

### 1.5.3 五层原理体系结构

五层模型：五层模型只出现在计算机网络教学过程中，这是对七层模型和四层模型的一个折中，既简洁又能将概念阐述清楚。

五层为：应用层 -- 传输层 / 运输层 -- 网络层 / 网际层 / IP层 -- 数据链路层 -- 物理层

接下来主要阐述五层原理体系结构！

### 1.5.3 常用的专业术语

一共可以分为三大类：实体、协议、服务。

**实体**

- 实体：任何可发送或接收信息的硬件或者软件进程。
- 对等实体：收发相同层次中的实体

**协议**

* 协议：控制两个对等实体进行逻辑通信的规则的集合。
* 协议有着三要素：语法、语义、同步。
  * 语法：定义所交换信息的格式。例如 TCP 数据报文格式、IP 数据报格式等
  * 语义：定义收发双方要完成的操作。例如 TCP 请求与相应
  * 同步：定义收发双方的时序关系。例如 TCP 三次握手、TCP 四次挥手

**服务**

在协议的控制下，两个对等实体间的逻辑通信使得本层能够向上一层提供服务。要实现本层协议，还需要使用下面一层所提供的服务。

服务访问点：在同一个系统中相邻两层的实体交换信息的逻辑接口，用于区分不同的服务类型。

* 数据链路层的服务访问点为帧的类型字段。
* 网络层的服务访问点为 IP 数据报首部中的协议字段。
* 数据层的服务访问点为端口号。

服务原语：上层使用下层所提供的服务必须通过与下层交换一些命令，这些命令称位服务原语。

PDU、SDU：

- 协议数据单元 PDU（Protocol Data Unit）：对等实体之间传送的数据包称为该层的协议数据单元。
- 服务数据单元 SDU（Service Data Unit）：同一系统内，层与层之间交换的数据包称为服务数据单元。
- 多个 SDU 可以合并成为一个 PDU、一个 SDU 也可以划分为几个 PDU。

![](..\图片\7-03【计算机网络】\1-6.png)

# 第二章 物理层

物理层考虑的是怎样才能在连接各种计算机的传输媒体上传输数据比特流。物理层为数据链路层屏蔽了各种传输媒体的差异，使数据链路层只需要考虑如何完成本层的协议和服务，而不必考虑网络具体的传输媒体是什么。

物理层协议主要有四个任务：机械特性、电气特性、功能特性、过程特性。

* 机械特性：指明接口所用接线器的形状和尺寸、引脚数目和排列、固定和锁定装置。
* 电气特性：指明在接口电缆的各条线上出现的电压的范围。
* 功能特性：指明某条线上出现的某一点评的电压表示何种意义。
* 过程特性：指明对于不同功能的各种可能事件的出现顺序。

## 2.1 传输媒体

传输媒体主要有着两大类：导引型传输媒体、非导引型传输媒体。

* 导引型传输媒体有着：同轴电缆、双绞线、光纤、电力线。
* 非导引型传输媒体有：无线电波、微波、红外线、可见光。

## 2.2 传输方式

根据不同的划分传输方式分为：串行传输和并行传输；同步传输和异步传输；单向通信（单工）、双向交替通信（半双工）、双向同时通信（全双工）；

**串行传输和并行传输**

* 串行传输：数据通过一条线路传输，一个一个比特依次传送，因此只需要一条线路。
* 并行传输：数据通过多条线路传输。

数据在进行远距离传输的时候用的是串行传输，不是并行传输。并行传输的优点是速度为串行传输的n倍，缺点是成本高，计算机内部数据的传输一般使用并行传输。

**同步传输和异步传输**

同步传输：数据以稳定的比特流形式传输，字节之间没有间隔。

接收端在每个比特信号的中间时刻进行检测，以判别接收到的是比特0还是比特1。由于不同设备的时钟周期存在差异，不能做到完全相同，在传输大量数据的过程中判别时刻的累计误差会导致接收端对比特信号的判别位置错位。因此需要采取方法使收发双方的始终保持同步。

* 外同步：在收发双方之间添加一条单独的时钟信号线。发送端在发送数据信号的同时，另外发送一条时钟信号，接收端按照同步信号的节奏来接受数据。
* 内同步：发送端将时钟同步信号编码到发送数据中一起传输，例如曼彻斯特编码。传统以太网采用的就是曼彻斯特编码的内同步方式。

![](..\图片\7-03【计算机网络】\2-1.png)

异步传输：以字节为独立的传输单位，字节之间的间隔时间不固定的。异步指的是字节之间异步，字节之间的时间间隔不固定。但是，字节中的每个比特依旧要同步，各个比特的持续时间要相同。

接收端仅在每个字节的起始处对子节内的比特实现同步。为此，通常要在每个子节的前后分别加上起始位和结束位。

![](..\图片\7-03【计算机网络】\2-2.png)

**单工、半双工和全双工**

* 单工通信：通信双方只有一个数据传输方向，例如无线电、广播。
* 半双工通信：需要两条信道，双方有两个数据传输方向，但是不可以同时通信。例如对讲机。
* 全双工通信：需要两条信道，通信双方有两个数据传输方向，可以进行同时通信。例如实时电话

## 2.3 编码与调制

在计算机网络中，计算机需要处理和传输文字、图片、音频和视频，这些我们统称为消息。数据是运输消息的实体，计算机所能够识别的数据便是二进制数据了。计算机中的网卡将二进制数据比特 0 和比特 1 变换成相应的电信号发送到网线，也就是说信号是数据的电磁表现。

由信源发出的原始电信号成为基带信号，基带信号可分为数字基带信号和模拟基带信号：

- 数字基带信号：例如计算机和 CPU 与内存之间传输的信号。
- 模拟基带信号：例如麦克风收到声音后产生的音频信号。

信号需要在信道中传输，信道有数字信道和模拟信道。

![](..\图片\7-03【计算机网络】\2-3.png)

**编码**

编码就是在不改变信号性质的情况下仅对数字基带信号的波形进行变换。编码后产生的信号仍为数字信号。可以在数字信道中传输。

* 数字基带信号转换为另一种数字信号在数字信道中传输。例如以太网使用曼彻斯特编码、4B/5B、8B/10B编码
* 模拟基带信号转换为数字信号 ，在数字信道中传输。例如，对音频信号进行编码的脉码调制PCM。

**调制**

把数据基带信号的频率范围，搬移到较高的频段，并转换为模拟信号，称为调制。调制后产生模拟信号，在模拟信道种传输。

* 数字信号转换为模拟信号，在模拟信道中传输。例如WiFi采用补码键控CCK、直接序列扩频DSSS、正交频分复用 OFDM 等调制方式。
* 模拟信号转换为另一种模拟信号，在模拟信道中传输。例如，语音数据加载到模拟的载波信号中传输。频分复用FDM技术，充分利用带宽资源。

**码元**

码元：在使用时间域的波形表示数字信号的时候，代表不同离散数值的基本波形。简单来说码元就是构成信号的一段波形。

**常用编码**

* 不归零编码NRZ（Not Return Zero）：在整个码元时间内，不会出现零电平。

  ![](..\图片\7-03【计算机网络】\2-4.png)

  为了辨别码元个数，在发送信号时需要发送方和接收方做到严格的同步。一般需要额外一根传输线来传输时钟信号，实现同步的目的。接收方按照时钟信号的节拍来逐个接收码元。但是额外一根线资源造成浪费，在计算机网络中的数据传输一般不采用这类编码。

* 归零编码RZ（Return Zero）：每个码元传输结束后都要”归零“。接收方只要在信号归零后进行采样，而不需要单独的时钟信号。

  ![](..\图片\7-03【计算机网络】\2-5.png)

  归零编码相当于把时钟信号用”归零“的方式放在了数据之内，看作一种自同步的信号。但是在传输过程中，大部分的数据带宽都用来传输零电平数据，造成资源浪费。编码效率低。

* 曼彻斯特编码：在码元中间时刻会产生跳变，跳变的含义可以自己定义。例如由低电平到高电平代表1/0信号，由高电平到滴电平代表0/1信号。

  ![](..\图片\7-03【计算机网络】\2-6.png)

  码元中间时刻的跳变既代表时钟，又代表数据。传统以太网使用的就是曼彻斯特编码 10Mb/s。

* 差分曼彻斯特编码：在差分曼彻斯特编码中间也有跳变，但是此跳变只代表时钟信号。比曼彻斯特编码变化少，更适合较高的传输速率。

  ![](..\图片\7-03【计算机网络】\2-7.png)

  具体的数据由码元开始处电平是否变化来表示。例如在码元结束和码元开始的时候电平做对比，有变化代表0/1，无变化代表1/0。

**基本调制方法**

- 调幅：对基带信号的波幅进行调整，例如将1信号波幅进行改变，在接收方读取时有载波输出为1。

- 调频：对基带信号频率进行调整，例如将 0 信号调制为频率 f1，1 信号调制为频率 f2。

- 调相：对基带信号相位进行调制，例如将 0 信号的初相位调整为 0 度，1 信号的初相位调整为 180 度。


![](..\图片\7-03【计算机网络】\2-8.png)

但是在以上基本调制方法中，1个码元只能包含1个比特信息。对此，我们可以是使用混合调制的方式。

因为频率和相位是相关的，即频率是相位随事件的变化率。所以一次只能调制频率和相位两个中的一个。通常情况下，相位和振幅可以结合起来一起调制，成为正交调幅调制QAM。

QAM-16：在 QAM-16 中有 12 种相位，每种相位有 1 或 2 种振幅可选择。由于此调制方法可以调制出 16 种码元，要完整的表示这 16 种情况，码元内是二进制数据，因此至少需要 4 个二进制数，也就是 4 个比特数据，因此在 QAM-16 调制方法中，每个码元可以表示 4 个比特数据。

## 2.4 信道极限容量

在实际传输过程中由于通信质量的问题会导致传输信号被干扰，导致信号波形出现了码元之间的清晰界限，这种现象叫码元串扰。

产生失真的因素主要有码元传输速率（与调制方法有关）、信号传输距离、噪声干扰、传输媒体质量等。因为以上情况，防止信道数据过大导致码间串扰，因此做出了信号极限容量的预测。其中最著名的就是奈氏准则和香农公式。

**奈氏准则**

奈氏准则：在假定的理想条件下，为了避免码间串扰，码元传输速率时有上限的。W 代表了信道带宽，单位为Hz。Baud是单位，是波特，也是码元 / 秒。

* 理想低通信道的最高码元传输速率 = 2 W Baud = 2 W 码元 / 秒
* 理想带通信道的最高码元传输速率 = W Baud = W 码元 / 秒

如果没有指定是带通信道，也就是给出信道频率地上下限，那么默认是指低通信道。

码元传输速率又称为波特率、调制速率、波形速率或者符号速率，它与比特率有一定的关系。要提高信息传输速率（比特率），就必须设法使每一个码元能够携带更多个比特的信息量，这需要采用多元制。
$$
设不同基本波形（码元）地数量为X = 相位数量 \times 每个相位振幅，则每个码元可携带地比特数量为log_2X;\\
数据传输速率（bit / s） = 码元传输速率 / 波特率（码元 / 秒） \times 每个码元可携带地比特数量（比特 / 码元）\\
= 码元传输速率 / 波特率（码元 / 秒） \times log_2X（比特 / 码元）
$$
当一个码元只携带 1 比特的信息量的时候，波特率（码元 / 秒）与比特率（比特 / 秒）在数值上面是相等的。携带 n  比特的信息量时，则波特率转换成比特率的时候，数值要乘以 n。

实际信道所能传输的最高码元速率，要明显低于奈氏准则给出的上限数值。奈氏准则是在理想条件下推导出来的，并没有考虑其他因素，例如传输距离、噪声干扰、传输媒体质量等。

**香农公式**

香农公式：带宽受限且有高斯白噪声干扰的信道的极限信息传输速率。
$$
c = W \times \log_2(1 + \frac{S}{N})
$$

* c：信道的极限信息传输速率。单位：b / s
* W：信道带宽 / 频率带宽。单位：Hz
* S：信道内所传信号的平均功率。
* N：信道内的高斯噪声功率。
* S / N：信噪比，使用分贝（dB）作为度量单位。信噪比（dB）= 10 ✖ log_10(S / N) (dB)

从香农公式可以看出来信道带宽或者信道中信噪比越大，信道的极限传输速率越高。但是在实际信道上能够达到的信息传输速率低不少，这是因为在实际信道中，信号还要受到其他的一些损伤，如各种脉冲干扰、信号在传输中的衰减和失真等，这些因素在香农公式并未考虑。

**总结**

在信道带宽一定的情况下，根据奈氏准则和香农公式，想要提高信息的传输速率就必须采用多元制（更好的调制方法）和努力提高信道中的信噪比。

自从香农公式发表之后，各种新的信号处理和调制方法不断出现，其目的都是为了尽可能地接近香农公式给出的传输速率极限。

# 第三章 数据链路层

数据链路层的功能：实现数据在一个网络之间的传输。

![](..\图片\7-03【计算机网络】\3-1.png)

- 链路（Link）就是从一个节点到相邻节点地一段物理线路，而中间没有任何其他地交换节点。
- 数据链路（Data Link）是指把实现通信协议地硬件和软件加到链路上面，就构成了数据链路。
- 数据链路以帧（Frame）为单位传输和处理数据。

**封装成帧**

封装成帧是把网络层交付的协议数据单元，添加帧头和帧尾的操作，称为封装成帧，主要目的是为了在链路上以帧为单元传输数据，从而实现数据链路层本身的功能。

![](..\图片\7-03【计算机网络】\3-2MAC Frame.png)

**差错检测**

在传输过程中可能会产生比特差错：1 可能会变成 0， 而 0 也可能变成 1。为此添加了检错码概念：

- 发送方会基于发送的数据和检错算法计算出检错码，并放在帧尾。
- 接收方主机根据数据链路层放在帧尾的检错码和检错算法来判断传输过程是否有错误。

![](..\图片\7-03【计算机网络】\3-3Error Checking Code.png)

**可靠传输**

接收方主机收到有误码的帧后，是不会接受该帧的，会将它丢弃。丢弃有误码的帧后，会进行其他措施来确保接收方主机还可以重新收到被丢弃的这个帧的正确副本，来实现发送方发送什么，接收方就能接收到什么。

尽管误码是不能够避免地，但若是能够实现发送方发送什么，接收方就能够收到什么，就成为可靠传输。

## 3.1 封装成帧

